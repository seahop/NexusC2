{{ define "main" }}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="flex gap-12">
    <!-- Sidebar -->
    <aside class="hidden lg:block w-64 flex-shrink-0">
      <nav class="sticky top-24 space-y-6">
        <!-- Getting Started -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Getting Started
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/docs/setup/"
                 class="sidebar-link {{ if eq .File.BaseFileName "setup" }}sidebar-link-active{{ end }}">
                Setup Guide
              </a>
            </li>
            <li>
              <a href="/docs/infrastructure/"
                 class="sidebar-link {{ if eq .File.BaseFileName "infrastructure" }}sidebar-link-active{{ end }}">
                Infrastructure
              </a>
            </li>
          </ul>
        </div>

        <!-- Core Concepts -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Core Concepts
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/docs/encryption/"
                 class="sidebar-link {{ if eq .File.BaseFileName "encryption" }}sidebar-link-active{{ end }}">
                Encryption
              </a>
            </li>
            <li>
              <a href="/docs/payload-generation/"
                 class="sidebar-link {{ if eq .File.BaseFileName "payload-generation" }}sidebar-link-active{{ end }}">
                Payload Generation
              </a>
            </li>
            <li>
              <a href="/docs/api/"
                 class="sidebar-link {{ if eq .File.BaseFileName "api" }}sidebar-link-active{{ end }}">
                REST API
              </a>
            </li>
          </ul>
        </div>

        <!-- Execution -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Execution
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/docs/bof-execution/"
                 class="sidebar-link {{ if eq .File.BaseFileName "bof-execution" }}sidebar-link-active{{ end }}">
                BOF Execution
              </a>
            </li>
            <li>
              <a href="/docs/assembly-execution/"
                 class="sidebar-link {{ if eq .File.BaseFileName "assembly-execution" }}sidebar-link-active{{ end }}">
                .NET Assembly
              </a>
            </li>
          </ul>
        </div>

        <!-- Pivoting -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Pivoting
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/docs/socks-proxy/"
                 class="sidebar-link {{ if eq .File.BaseFileName "socks-proxy" }}sidebar-link-active{{ end }}">
                SOCKS Proxy
              </a>
            </li>
            <li>
              <a href="/docs/linked-agents/"
                 class="sidebar-link {{ if eq .File.BaseFileName "linked-agents" }}sidebar-link-active{{ end }}">
                Linked Agents
              </a>
            </li>
          </ul>
        </div>

        <!-- Other -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Other
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/docs/file-transfers/"
                 class="sidebar-link {{ if eq .File.BaseFileName "file-transfers" }}sidebar-link-active{{ end }}">
                File Transfers
              </a>
            </li>
            <li>
              <a href="/docs/logviewer/"
                 class="sidebar-link {{ if eq .File.BaseFileName "logviewer" }}sidebar-link-active{{ end }}">
                Log Viewer
              </a>
            </li>
          </ul>
        </div>

        <!-- Reference -->
        <div>
          <h3 class="text-xs font-semibold text-nexus-green-500 uppercase tracking-wider mb-3">
            Reference
          </h3>
          <ul class="space-y-1">
            <li>
              <a href="/commands/" class="sidebar-link">
                Command Reference
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <article class="flex-1 min-w-0">
      <!-- Breadcrumb -->
      <nav class="mb-8">
        <ol class="flex items-center gap-2 text-sm text-gray-500">
          <li><a href="/" class="hover:text-nexus-green-500 transition-colors">Home</a></li>
          <li class="flex items-center gap-2">
            <span>/</span>
            <a href="/docs/" class="hover:text-nexus-green-500 transition-colors">Docs</a>
          </li>
          <li class="flex items-center gap-2">
            <span>/</span>
            <span class="text-gray-300">{{ .Title }}</span>
          </li>
        </ol>
      </nav>

      <!-- Title -->
      <header class="mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">{{ .Title }}</h1>
        {{ with .Params.description }}
          <p class="text-xl text-gray-400">{{ . }}</p>
        {{ end }}
      </header>

      <!-- Content -->
      <div class="prose prose-lg max-w-none">
        {{ .Content }}
      </div>

      <!-- Navigation -->
      <nav class="mt-16 pt-8 border-t border-nexus-green-500/20">
        <div class="flex justify-between">
          {{ with .PrevInSection }}
            <a href="{{ .Permalink }}" class="group flex items-center gap-2 text-gray-400 hover:text-nexus-green-500 transition-colors">
              <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              <span>{{ .Title }}</span>
            </a>
          {{ else }}
            <div></div>
          {{ end }}

          {{ with .NextInSection }}
            <a href="{{ .Permalink }}" class="group flex items-center gap-2 text-gray-400 hover:text-nexus-green-500 transition-colors">
              <span>{{ .Title }}</span>
              <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </a>
          {{ else }}
            <div></div>
          {{ end }}
        </div>
      </nav>
    </article>
  </div>
</div>
{{ end }}
